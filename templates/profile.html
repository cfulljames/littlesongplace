{% extends "base.html" %}

{% block title %}{{ name }}'s profile{% endblock %}

{% block body %}

<h1 class="profile-name">{{ name }}</h1>

<!-- Bio -->
<div class="profile-bio" id="profile-bio">{{ (bio.replace("\n", "<br>"))|safe }}</div>

<!-- Bio edit form -->
{% if session["userid"] == userid %}

<div class="profile-action">
    <a href="javascript:showEditForm();" id="profile-bio-edit-btn">Edit Bio</a>
</div>

<form id="profile-edit-form" action="/update-bio" method="post" hidden>
    <h2> Edit Bio </h2>
    <p>Common HTML tags (&lt;a&gt;, &lt;b&gt;, &lt;i&gt;, &lt;img&gt;, etc.) are allowed.</p>
    <p>Examples:</p>
    <ul>
        <li>&lt;b&gt;<b>bold</b>&lt;/b&gt;</li>
        <li>&lt;i&gt;<i>italic</i>&lt;/i&gt;</li>
        <li>&lt;a href=&quot;https://littlesong.place&quot;&gt;<a href="https://littlesong.place">link</a>&lt;/a&gt;</li>
        <li>&lt;span style=&quot;color: blue;&quot;&gt;<span style="color: blue">blue</span>&lt;/span&gt;</li>
    </ul>
    <div>
        <textarea name="bio" maxlength="10000">{{ bio }}</textarea>
    </div>
    <div class="profile-edit-buttons">
        <a href="javascript:hideEditForm();">Cancel</a>
        <input type="submit" value="Save" class="button">
    </div>
</form>

<!-- Show/hide bio edit form -->
<script>
    function showEditForm() {
        document.getElementById("profile-bio").hidden = true;
        document.getElementById("profile-bio-edit-btn").hidden = true;
        document.getElementById("profile-edit-form").hidden = false;
    }
    function hideEditForm() {
        document.getElementById("profile-bio").hidden = false;
        document.getElementById("profile-bio-edit-btn").hidden = false;
        document.getElementById("profile-edit-form").hidden = true;
    }
</script>

{% endif %}

<h2>Songs</h2>

<!-- Upload New Song button -->
{% if session["userid"] == userid %}
<div class="profile-action">
    <a href="/edit-song">Upload New Song</a>
</div>
{% endif %}

<!-- Song List -->
{{ song_list|safe }}

{% endblock %}

